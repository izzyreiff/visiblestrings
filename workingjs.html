<!DOCTYPE html>
<html>
<head>
    <title>Song Search</title>
</head>
<body>
    <h1>Song Search</h1>
    <input type="text" id="userInput" placeholder="Enter a search term">
    <button onclick="searchSongs()">Search</button>
    <p id="result"></p>

    <script>
        var songs = []; // Initialize an empty array for song data

        // Function to fetch and parse the CSV file
        function fetchCSV() {
            fetch('clean.csv') // Replace with the path to your CSV file
                .then(response => response.text())
                .then(data => {
                    // Parse the CSV data into an array of objects
                    var rows = data.split('\n');
                    for (var i = 1; i < rows.length; i++) { // Start from 1 to skip the header row
                        var columns = rows[i].split(',');
                        if (columns.length === 3) { // Assuming 3 columns: Title Album Lyrics
                            var song = {
                                Title: columns[0].trim(),
                                Album: columns[1].trim(),
                                Lyrics: columns[2].trim()
                            };
                            songs.push(song);
                        }
                    }
                })
                .catch(error => console.error('Error fetching CSV:', error));
        }

        // Call the fetchCSV function to load data from the CSV file
        fetchCSV();

        function searchSongs() {
            var userInput = document.getElementById('userInput').value.toLowerCase();
            var matchingEntries = [];
            console.log("checking")
            for (var i = 0; i < songs.length; i++) {
                var lyrics = songs[i].Lyrics.toLowerCase();
                var title = songs[i].Title;
                console.log(1)
                if (lyrics.includes(userInput)) {
                    matchingEntries.push(title);
                    console.log("match")
                }
            }
            var resultElement = document.getElementById('result');
            if (matchingEntries.length > 0) {
                resultElement.textContent = "Songs containing '" + userInput + "': " + matchingEntries.join(", ");
            } else {
                resultElement.textContent = "No songs were found containing '" + userInput + "'. Try removing a letter from the beginning or end, and enter it again!";
            }
        }
    </script>
</body>
</html>
